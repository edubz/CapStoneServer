{"version":3,"sources":["../src/Client.js"],"names":["Client","auth","api","Boolean","query","listLibraries","then","libraries","payload","body","data","map","l","name","getLibrary","library","getLibraryVersions","archive","contributeLibrary","_throwError","error","publishLibrary","force","deleteLibrary","errors","errorMessages","e","message","join","Error","url","downloadFile","files","platformId","targetVersion","compileCode","signal","deviceId","signalDevice","listDevices","listBuildTargets","onlyFeatured","targets","target","platforms","platform","push","version","prerelease","prereleases","indexOf","firmware_vendor","full","context","trackingIdentity"],"mappings":"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","file":"Client.js","sourcesContent":["import Particle from './Particle';\nimport Library from './Library';\n\n\nexport default class Client {\n\tconstructor({ auth, api = new Particle() }){\n\t\tObject.assign(this, { auth, api });\n\t}\n\n\tready(){\n\t\treturn Boolean(this.auth);\n\t}\n\n\t/**\n\t * Get firmware library objects\n\t * @param  {Object} query The query parameters for libraries. See Particle.listLibraries\n\t * @returns {Promise} A promise\n\t */\n\tlibraries(query = {}){\n\t\treturn this.api.listLibraries(Object.assign({}, query, { auth: this.auth }))\n\t\t\t.then(payload => {\n\t\t\t\tconst libraries = payload.body.data || [];\n\t\t\t\treturn libraries.map(l => new Library(this, l));\n\t\t\t});\n\t}\n\n\t/**\n\t * Get one firmware library object\n\t * @param  {String} name Name of the library to fetch\n\t * @param  {Object} query The query parameters for libraries. See Particle.getLibrary\n\t * @returns {Promise} A promise\n\t */\n\tlibrary(name, query = {}){\n\t\treturn this.api.getLibrary(Object.assign({}, query, { name, auth: this.auth }))\n\t\t\t.then(payload => {\n\t\t\t\tconst library = payload.body.data || {};\n\t\t\t\treturn new Library(this, library);\n\t\t\t});\n\t}\n\n\t/**\n\t * Get list of library versions\n\t * @param  {String} name Name of the library to fetch\n\t * @param  {Object} query The query parameters for versions. See Particle.getLibraryVersions\n\t * @returns {Promise} A promise\n\t */\n\tlibraryVersions(name, query = {}){\n\t\treturn this.api.getLibraryVersions(Object.assign({}, query, { name, auth: this.auth }))\n\t\t\t.then(payload => {\n\t\t\t\tconst libraries = payload.body.data || [];\n\t\t\t\treturn libraries.map(l => new Library(this, l));\n\t\t\t});\n\t}\n\n\t/**\n\t * Contribute a new library version\n\t * @param  {Buffer} archive The compressed archive with the library source\n\t * @returns {Promise} A promise\n\t */\n\tcontributeLibrary(archive){\n\t\treturn this.api.contributeLibrary({ archive, auth: this.auth })\n\t\t\t.then(payload => {\n\t\t\t\tconst library = payload.body.data || {};\n\t\t\t\treturn new Library(this, library);\n\t\t\t}, error => {\n\t\t\t\tthis._throwError(error);\n\t\t\t});\n\t}\n\n\t/**\n\t * Make the the most recent private library version public\n\t * @param  {string} name The name of the library to publish\n\t * @return {Promise} To publish the library\n\t */\n\tpublishLibrary(name){\n\t\treturn this.api.publishLibrary({ name, auth: this.auth })\n\t\t\t.then(payload => {\n\t\t\t\tconst library = payload.body.data || {};\n\t\t\t\treturn new Library(this, library);\n\t\t\t}, error => {\n\t\t\t\tthis._throwError(error);\n\t\t\t});\n\t}\n\n\t/**\n\t * Delete an entire published library\n\t * @param  {String} $0.name Name of the library to delete\n\t * @param  {String} $0.force Key to force deleting a public library\n\t * @returns {Promise} A promise\n\t */\n\tdeleteLibrary({ name, force }){\n\t\treturn this.api.deleteLibrary({ name, force, auth: this.auth })\n\t\t\t.then(() => true, error => this._throwError(error));\n\t}\n\n\t_throwError(error){\n\t\tif (error.body && error.body.errors){\n\t\t\tconst errorMessages = error.body.errors.map((e) => e.message).join('\\n');\n\t\t\tthrow new Error(errorMessages);\n\t\t}\n\t\tthrow error;\n\t}\n\n\tdownloadFile(url){\n\t\treturn this.api.downloadFile({ url });\n\t}\n\n\t/**\n\t * @param {Object} files Object containing files to be compiled\n\t * @param {Number} platformId Platform id number of the device you are compiling for\n\t * @param {String} targetVersion System firmware version to compile against\n\t * @returns {Promise} A promise\n\t * @deprecated Will be removed in 6.5\n\t */\n\tcompileCode(files, platformId, targetVersion){\n\t\treturn this.api.compileCode({ files, platformId, targetVersion, auth: this.auth });\n\t}\n\n\t/**\n\t * @param {String} $0.deviceId Device ID or Name\n\t * @param {Boolean} $0.signal   Signal on or off\n\t * @returns {Promise} A promise\n\t * @deprecated Will be removed in 6.5\n\t */\n\tsignalDevice({ signal, deviceId }){\n\t\treturn this.api.signalDevice({ signal, deviceId, auth: this.auth });\n\t}\n\n\t/**\n\t * @returns {Promise} A promise\n\t * @deprecated Will be removed in 6.5\n\t */\n\tlistDevices(){\n\t\treturn this.api.listDevices({ auth: this.auth });\n\t}\n\n\t/**\n\t * @returns {Promise} A promise\n\t * @deprecated Will be removed in 6.5\n\t */\n\tlistBuildTargets(){\n\t\treturn this.api.listBuildTargets({ onlyFeatured: true, auth: this.auth })\n\t\t\t.then(payload => {\n\t\t\t\tlet targets = [];\n\t\t\t\tfor (let target of payload.body.targets){\n\t\t\t\t\tfor (let platform of target.platforms){\n\t\t\t\t\t\ttargets.push({\n\t\t\t\t\t\t\tversion: target.version,\n\t\t\t\t\t\t\tplatform: platform,\n\t\t\t\t\t\t\tprerelease: target.prereleases.indexOf(platform) > -1,\n\t\t\t\t\t\t\tfirmware_vendor: target.firmware_vendor\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn targets;\n\t\t\t}, () => {});\n\t}\n\n\ttrackingIdentity({ full=false, context }={}){\n\t\treturn this.api.trackingIdentity({ full, context, auth: this.auth })\n\t\t\t.then(payload => {\n\t\t\t\treturn payload.body;\n\t\t\t});\n\t}\n}\n"]}